{"ast":null,"code":"var _jsxFileName = \"/Users/Buffalo/Desktop/menu/popdavise-v2/src/views/auth/multiform/first-branchoffice.jsx\";\n//ESTE ES EL COMPONENTE PADRE\nimport React from 'react';\nimport StepOne from './forms/step-one';\nimport { geocodeByAddress, getLatLng } from 'react-google-places-autocomplete';\nimport { CenterElement } from '../../../components/containers/containers';\nimport StepTwo from './forms/step-two';\nimport StepThree from './forms/step-three';\nimport StepFour from './forms/step-four';\nimport StepFive from './forms/step-five';\nimport { PostMethod, GetMethod } from '../../../utils/peticiones';\nimport { connect } from 'react-redux';\nimport { SuccesAlert, ErrorAlert, InfoAlert } from '../../../utils/alertas';\nimport uuid from 'react-uuid';\n\nconst FirstBranchOffice = props => {\n  console.log('FORMULARIO-EDITAR', props);\n  const token = props.sesion.token;\n  const urlFacebook = 'http://www.facebook.com/';\n  const urlInstagram = 'http://www.instagram.com/';\n  const urlWebsite = 'http://';\n  const [sucursal, setSucursal] = React.useState({\n    name: '',\n    telephone: '',\n    place: '',\n    address: {\n      latitude: '',\n      longitude: '',\n      place: ''\n    },\n    category: '',\n    days: {\n      lunes: {\n        day: 'Lunes',\n        enable: false,\n        start: '00:00',\n        end: '00:00'\n      },\n      martes: {\n        day: 'Martes',\n        enable: false,\n        start: '00:00',\n        end: '00:00'\n      },\n      miercoles: {\n        day: 'Miércoles',\n        enable: false,\n        start: '00:00',\n        end: '00:00'\n      },\n      jueves: {\n        day: 'Jueves',\n        enable: false,\n        start: '00:00',\n        end: '00:00'\n      },\n      viernes: {\n        day: 'Viernes',\n        enable: false,\n        start: '00:00',\n        end: '00:00'\n      },\n      sabado: {\n        day: 'Sábado',\n        enable: false,\n        start: '00:00',\n        end: '00:00'\n      },\n      domingo: {\n        day: 'Domingo',\n        enable: false,\n        start: '00:00',\n        end: '00:00'\n      }\n    },\n    website: '',\n    facebook: '',\n    instagram: '',\n    email: '',\n    tables: 0,\n    id_user: props.sesion.user.id_user,\n    image: null,\n    imageUrl: '',\n    uuid: uuid()\n  });\n  const [error, setError] = React.useState({\n    e_name: false,\n    e_telephone: false,\n    e_website: false,\n    e_facebook: false,\n    e_instagram: false,\n    e_email: false\n  });\n  React.useEffect(() => {\n    if (props.match.params.id) {\n      const getSucursal = async () => {\n        const result = await GetMethod(`api/users/restaurant/${props.match.params.id}`, {\n          Authorization: 'Bearer ' + token\n        });\n        console.log(result.response.data.data);\n\n        if (result.ok) {\n          const data = result.response.data.data;\n          setError({\n            e_name: true,\n            e_telephone: true,\n            e_website: true,\n            e_facebook: true,\n            e_instagram: true,\n            e_email: true\n          });\n          setSucursal({ ...sucursal,\n            name: data.name,\n            telephone: data.telephone,\n            place: data.address,\n            category: data.category\n          });\n        }\n      };\n\n      getSucursal();\n    }\n  }, []);\n  const [indice, setIndice] = React.useState(1);\n  const [load, setLoad] = React.useState(false);\n\n  const handleChange = e => {\n    const {\n      target: {\n        name,\n        value\n      }\n    } = e;\n    setSucursal({ ...sucursal,\n      [name]: value\n    });\n  };\n\n  const nextStep = () => {\n    setIndice(indice + 1);\n  };\n\n  const prevStep = () => {\n    setIndice(indice - 1);\n  };\n\n  const handleSelect = e => {\n    //console.log(e.description)\n    const place = e.description;\n    geocodeByAddress(place).then(results => getLatLng(results[0])).then(({\n      lat,\n      lng\n    }) => setSucursal({ ...sucursal,\n      place: place,\n      address: { ...sucursal.address,\n        place: place,\n        latitude: lat,\n        longitude: lng\n      }\n    })); //------>   \n  };\n\n  const handleChecked = e => {\n    if (e.target.checked) {\n      setSucursal({ ...sucursal,\n        days: { ...sucursal.days,\n          [e.target.name]: { ...sucursal.days[e.target.name],\n            enable: e.target.checked\n          }\n        }\n      });\n    } else {\n      setSucursal({ ...sucursal,\n        days: { ...sucursal.days,\n          [e.target.name]: { ...sucursal.days[e.target.name],\n            enable: e.target.checked,\n            start: '',\n            end: ''\n          }\n        }\n      });\n    }\n  };\n\n  const handleTime = e => {\n    setSucursal({ ...sucursal,\n      days: { ...sucursal.days,\n        [e.target.name]: { ...sucursal.days[e.target.name],\n          [e.target.id]: e.target.value\n        }\n      }\n    });\n  };\n\n  const addNumber = () => {\n    setSucursal({ ...sucursal,\n      tables: sucursal.tables + 1\n    });\n  };\n\n  const removeNumber = () => {\n    if (sucursal.tables === 0) {\n      setSucursal({ ...sucursal,\n        tables: sucursal.tables\n      });\n    } else {\n      setSucursal({ ...sucursal,\n        tables: sucursal.tables - 1\n      });\n    }\n  };\n\n  const handleSubmit = async e => {\n    setLoad(true);\n    const {\n      name,\n      telephone,\n      place,\n      category,\n      tables\n    } = sucursal;\n\n    if (name === '' || telephone === '' || place === '' || category === '' || tables === 0) {\n      InfoAlert('Asegurate de llenar bien todos los campos');\n      setLoad(false);\n      return;\n    }\n\n    const sucursalObject = { ...sucursal,\n      facebook: urlFacebook + sucursal.facebook,\n      instagram: urlInstagram + sucursal.instagram,\n      website: urlWebsite + sucursal.website\n    }; //console.log('resultado', sucursalObject)\n\n    const result = await PostMethod(sucursalObject, 'api/users/restaurant', {\n      Authorization: 'Bearer ' + token\n    });\n\n    if (result.ok) {\n      SuccesAlert('Sucursal creada');\n      props.history.push('/dashboard');\n      setLoad(false);\n    } else {\n      ErrorAlert('algo salio mal');\n      setLoad(false);\n      props.history.push('/dashboard/first');\n      console.log(result);\n    } //console.log(sucursal)\n\n  }; //console.log(sucursal)\n\n\n  const renderForms = () => {\n    switch (indice) {\n      case 1:\n        return /*#__PURE__*/React.createElement(StepOne, {\n          sucursal: sucursal,\n          handleChange: handleChange,\n          nextStep: nextStep,\n          prevStep: prevStep,\n          handleSelect: handleSelect,\n          flag: props.flag,\n          error: error,\n          setError: setError,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 21\n          }\n        });\n\n      case 2:\n        return /*#__PURE__*/React.createElement(StepTwo, {\n          sucursal: sucursal,\n          handleChange: handleChange,\n          nextStep: nextStep,\n          prevStep: prevStep,\n          handleChecked: handleChecked,\n          handleTime: handleTime,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 21\n          }\n        });\n\n      case 3:\n        return /*#__PURE__*/React.createElement(StepThree, {\n          sucursal: sucursal,\n          handleChange: handleChange,\n          nextStep: nextStep,\n          prevStep: prevStep,\n          error: error,\n          setError: setError,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 21\n          }\n        });\n\n      case 4:\n        return /*#__PURE__*/React.createElement(StepFour, {\n          nextStep: nextStep,\n          prevStep: prevStep,\n          sucursal: sucursal,\n          setSucursal: setSucursal,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 21\n          }\n        });\n\n      case 5:\n        return /*#__PURE__*/React.createElement(StepFive, {\n          sucursal: sucursal,\n          nextStep: nextStep,\n          prevStep: prevStep,\n          handleChange: handleChange,\n          handleSubmit: handleSubmit,\n          addNumber: addNumber,\n          removeNumber: removeNumber,\n          load: load,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 21\n          }\n        });\n\n      default:\n        return;\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(CenterElement, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }\n  }, renderForms());\n}; //REDUX-------------->\n\n\nconst mapStateToProps = state => {\n  return {\n    sesion: state.login\n  };\n};\n\nexport default connect(mapStateToProps)(FirstBranchOffice);","map":{"version":3,"sources":["/Users/Buffalo/Desktop/menu/popdavise-v2/src/views/auth/multiform/first-branchoffice.jsx"],"names":["React","StepOne","geocodeByAddress","getLatLng","CenterElement","StepTwo","StepThree","StepFour","StepFive","PostMethod","GetMethod","connect","SuccesAlert","ErrorAlert","InfoAlert","uuid","FirstBranchOffice","props","console","log","token","sesion","urlFacebook","urlInstagram","urlWebsite","sucursal","setSucursal","useState","name","telephone","place","address","latitude","longitude","category","days","lunes","day","enable","start","end","martes","miercoles","jueves","viernes","sabado","domingo","website","facebook","instagram","email","tables","id_user","user","image","imageUrl","error","setError","e_name","e_telephone","e_website","e_facebook","e_instagram","e_email","useEffect","match","params","id","getSucursal","result","Authorization","response","data","ok","indice","setIndice","load","setLoad","handleChange","e","target","value","nextStep","prevStep","handleSelect","description","then","results","lat","lng","handleChecked","checked","handleTime","addNumber","removeNumber","handleSubmit","sucursalObject","history","push","renderForms","flag","mapStateToProps","state","login"],"mappings":"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","sourcesContent":["//ESTE ES EL COMPONENTE PADRE\nimport React from 'react';\nimport StepOne from './forms/step-one';\nimport {geocodeByAddress, getLatLng} from 'react-google-places-autocomplete'\nimport { CenterElement } from '../../../components/containers/containers';\nimport StepTwo from './forms/step-two';\nimport StepThree from './forms/step-three';\nimport StepFour from './forms/step-four';\nimport StepFive from './forms/step-five';\nimport { PostMethod, GetMethod } from '../../../utils/peticiones';\nimport {connect} from 'react-redux'\nimport { SuccesAlert, ErrorAlert, InfoAlert } from '../../../utils/alertas';\nimport uuid from 'react-uuid'\n\n\nconst FirstBranchOffice = (props) => {\n\n    console.log('FORMULARIO-EDITAR',props)\n\n    const token = props.sesion.token\n    \n    \n   \n    const urlFacebook = 'http://www.facebook.com/'\n    const urlInstagram = 'http://www.instagram.com/'\n    const urlWebsite = 'http://'\n\n    const [sucursal, setSucursal] = React.useState({\n        name:'',\n        telephone:'',\n        place:'',\n        address:{ latitude:'', longitude:'', place:''},\n        category:'',\n        days:{\n            lunes:{day:'Lunes', enable:false, start:'00:00', end:'00:00'},\n            martes:{day:'Martes', enable:false, start:'00:00', end:'00:00'},\n            miercoles:{day:'Miércoles', enable:false, start:'00:00', end:'00:00'},\n            jueves:{day:'Jueves', enable:false, start:'00:00', end:'00:00'},\n            viernes:{day:'Viernes', enable:false, start:'00:00', end:'00:00'},\n            sabado:{day:'Sábado', enable:false, start:'00:00', end:'00:00'},\n            domingo:{day:'Domingo', enable:false, start:'00:00', end:'00:00'},\n        },\n        website:'',\n        facebook:'',\n        instagram:'',\n        email:'',\n        tables:0,\n        id_user: props.sesion.user.id_user,\n        image:null,\n        imageUrl:'',\n        uuid:uuid()\n    })\n    const [error, setError] = React.useState({\n        e_name:false,\n        e_telephone:false,\n        e_website:false,\n        e_facebook:false,\n        e_instagram:false,\n        e_email:false\n    })\n\n    React.useEffect(() =>{\n        if(props.match.params.id){\n            const getSucursal = async () =>{\n                const result = await GetMethod(`api/users/restaurant/${props.match.params.id}`, {Authorization:'Bearer ' + token})\n                console.log(result.response.data.data)\n                if(result.ok){\n                    const data = result.response.data.data\n                    setError({\n                        e_name:true,\n                        e_telephone:true,\n                        e_website:true,\n                        e_facebook:true,\n                        e_instagram:true,\n                        e_email:true\n                    })\n                    setSucursal({\n                        ...sucursal,\n                        name:data.name,\n                        telephone: data.telephone,\n                        place: data.address,\n                        category: data.category\n                    })\n                }\n            }\n            getSucursal();\n        }\n    },[])\n\n\n    \n    const [indice, setIndice] = React.useState(1);\n    const [load, setLoad] = React.useState(false);\n\n    const handleChange = (e) =>{\n        const { target:{name, value}} = e\n        setSucursal({...sucursal, [name]:value})\n    }\n    const nextStep = () =>{setIndice(indice + 1)}\n    const prevStep = () =>{setIndice(indice - 1)}\n    \n    const handleSelect = (e) =>{\n       //console.log(e.description)\n       const place = e.description\n       geocodeByAddress(place)\n       .then(results => getLatLng(results[0]))\n       .then(({lat, lng}) => setSucursal({\n           ...sucursal,\n           place: place,\n           address:{\n               ...sucursal.address,\n               place: place,\n               latitude:lat,\n               longitude:lng\n           }\n       }))\n     //------>   \n    }\n    const handleChecked = (e) =>{\n        if(e.target.checked){\n            setSucursal({\n                ...sucursal,\n                days:{ ...sucursal.days,\n                        [e.target.name]:{ ...sucursal.days[e.target.name],\n                        enable: e.target.checked\n                    }\n                }\n            })\n        }else{\n            setSucursal({\n                ...sucursal,\n                days:{ ...sucursal.days,\n                        [e.target.name]:{ ...sucursal.days[e.target.name],\n                        enable: e.target.checked,\n                        start:'',\n                        end:''\n                    }\n                }\n            })\n        }\n    }\n    const handleTime = (e) =>{\n        setSucursal({\n            ...sucursal,\n            days:{\n                ...sucursal.days,\n                [e.target.name]:{\n                    ...sucursal.days[e.target.name],\n                    [e.target.id]: e.target.value\n                }\n            }\n        })\n    }\n    const addNumber = () =>{\n        setSucursal({\n            ...sucursal,\n            tables: sucursal.tables + 1\n        })\n    }\n\n    const removeNumber = () =>{\n        if(sucursal.tables === 0){\n            setSucursal({...sucursal, tables: sucursal.tables})\n        }else{\n            setSucursal({...sucursal, tables: sucursal.tables - 1})\n        }\n    }\n\n    \n\n    const handleSubmit = async (e) =>{\n        setLoad(true)\n        const {name, telephone, place, category, tables} = sucursal\n    \n        if(name === '' || telephone === '' || place === '' || category === '' || tables === 0){\n            InfoAlert('Asegurate de llenar bien todos los campos');\n            setLoad(false)\n            return;\n        }\n        \n        \n        const sucursalObject = {\n            ...sucursal,\n            facebook: urlFacebook + sucursal.facebook,\n            instagram: urlInstagram + sucursal.instagram,\n            website: urlWebsite + sucursal.website\n        }\n\n        //console.log('resultado', sucursalObject)\n\n        const result = await PostMethod(sucursalObject,'api/users/restaurant', {Authorization:'Bearer ' + token})\n        if(result.ok){\n          SuccesAlert('Sucursal creada')\n          props.history.push('/dashboard')\n          setLoad(false)\n        }else{\n          ErrorAlert('algo salio mal')\n          setLoad(false)\n          props.history.push('/dashboard/first')\n          console.log(result)\n        }\n        //console.log(sucursal)\n    }\n    \n\n    //console.log(sucursal)\n\n    \n\n\n    const renderForms = () =>{\n        switch (indice) {\n            case 1:\n                return(\n                    <StepOne    sucursal={sucursal}\n                                handleChange={handleChange}\n                                nextStep={nextStep}\n                                prevStep={prevStep}\n                                handleSelect={handleSelect}\n                                flag={props.flag}\n                                error={error}\n                                setError={setError}\n                                />\n                )\n            case 2:\n                return(\n                    <StepTwo    sucursal={sucursal}\n                                handleChange={handleChange}\n                                nextStep={nextStep}\n                                prevStep={prevStep}\n                                handleChecked={handleChecked}\n                                handleTime={handleTime}\n                                />\n                )\n            \n            case 3:\n                return(\n                    <StepThree  sucursal={sucursal}\n                                handleChange={handleChange}\n                                nextStep={nextStep}\n                                prevStep={prevStep}\n                                error={error}\n                                setError={setError}\n                                \n                                />\n                )\n\n            case 4:\n                return(\n                    <StepFour   nextStep={nextStep}\n                                prevStep={prevStep}\n                                sucursal={sucursal}\n                                setSucursal={setSucursal}\n                                />\n                )\n            \n            case 5:\n                return(\n                    <StepFive   sucursal={sucursal}\n                                nextStep={nextStep}\n                                prevStep={prevStep}\n                                handleChange={handleChange}\n                                handleSubmit={handleSubmit}\n                                addNumber={addNumber}\n                                removeNumber={removeNumber}\n                                load={load}\n                                />\n                )\n        \n            default:\n                return;\n        }\n    }\n\n    \n\n    return (\n        <CenterElement>\n                \n            {renderForms()} \n            \n        </CenterElement>\n        \n    );\n};\n\n\n\n\n\n\n\n//REDUX-------------->\nconst mapStateToProps = (state) => {\n    return {\n        sesion: state.login\n    }\n}\nexport default connect(mapStateToProps)(FirstBranchOffice)\n"]},"metadata":{},"sourceType":"module"}