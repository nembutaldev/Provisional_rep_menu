{"ast":null,"code":"var _jsxFileName = \"/Users/Buffalo/Desktop/menu/popdavise-v2/src/views/auth/perfil/items/perfil-password.jsx\";\nimport React from 'react';\nimport { Form, FieldInput, Label } from '../../../../components/inputs/item-forms';\nimport { Input } from '../../../../components/inputs/inputs';\nimport { ButtonSubmit } from '../../../../components/buttons/button-submit';\nimport { InfoAlert, SuccesAlert } from '../../../../utils/alertas';\nimport { PostMethod } from '../../../../utils/peticiones';\nimport SpinerForm from '../../../../components/spiners/spiner-form';\nconst initialState = {\n  new_password: '',\n  old_password: '',\n  repeat_newPass: ''\n};\n\nconst PerfilPassword = props => {\n  //console.log('CONTRASEÑACONTRASEÑA',)\n  const ideUser = props.sesion.user.id_user;\n  const token = props.sesion.token;\n  const [pass, setPass] = React.useState(initialState);\n  const [load, setLoad] = React.useState(false);\n\n  const onChange = e => {\n    const {\n      target: {\n        name,\n        value\n      }\n    } = e;\n    setPass({ ...pass,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoad(true);\n\n    if (pass.new_password !== pass.repeat_newPass) {\n      InfoAlert('Las nuevas contraseñas no coinciden');\n      setLoad(false);\n      return;\n    }\n\n    const newPass = {\n      new_password: pass.new_password,\n      old_password: pass.old_password\n    };\n    const result = await PostMethod(newPass, `api/users/profile/passwords/${ideUser}`, {\n      Authorization: 'Bearer ' + token\n    });\n\n    if (result.ok) {\n      SuccesAlert('La contraseña se cambio con éxito');\n      setPass(initialState);\n      setLoad(false);\n    } else {\n      //console.log(result.response)\n      setLoad(false);\n      InfoAlert('Tu contraseña actual es incorrecta');\n    } //console.log(result)\n\n  };\n\n  return /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FieldInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, \"Vieja contrase\\xF1a\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    name: \"old_password\",\n    onChange: onChange,\n    placeholder: \"Escribe tu contrase\\xF1a actual\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(FieldInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, \"Nueva contrase\\xF1a\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    name: \"new_password\",\n    onChange: onChange,\n    placeholder: \"Escribe una nueva contrase\\xF1a\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(FieldInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"Repetir nueva contrase\\xF1a\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"password\",\n    name: \"repeat_newPass\",\n    onChange: onChange,\n    placeholder: \"Repite la nueva contrase\\xF1a\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(FieldInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, load ? /*#__PURE__*/React.createElement(SpinerForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }) : /*#__PURE__*/React.createElement(ButtonSubmit, {\n    margin: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, \"Cambiar contrase\\xF1a\")));\n};\n\nexport default PerfilPassword;","map":{"version":3,"sources":["/Users/Buffalo/Desktop/menu/popdavise-v2/src/views/auth/perfil/items/perfil-password.jsx"],"names":["React","Form","FieldInput","Label","Input","ButtonSubmit","InfoAlert","SuccesAlert","PostMethod","SpinerForm","initialState","new_password","old_password","repeat_newPass","PerfilPassword","props","ideUser","sesion","user","id_user","token","pass","setPass","useState","load","setLoad","onChange","e","target","name","value","handleSubmit","preventDefault","newPass","result","Authorization","ok"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, FieldInput, Label } from '../../../../components/inputs/item-forms';\nimport { Input } from '../../../../components/inputs/inputs';\nimport { ButtonSubmit } from '../../../../components/buttons/button-submit';\nimport { InfoAlert, SuccesAlert } from '../../../../utils/alertas';\nimport { PostMethod } from '../../../../utils/peticiones';\nimport SpinerForm from '../../../../components/spiners/spiner-form';\n\n\nconst initialState = {\n    new_password:'',\n    old_password:'',\n    repeat_newPass : ''\n}\n\n\nconst PerfilPassword = (props) => {\n    //console.log('CONTRASEÑACONTRASEÑA',)\n\n    const ideUser = props.sesion.user.id_user\n    const token = props.sesion.token\n    const [pass, setPass] = React.useState(initialState)\n    const [load, setLoad] = React.useState(false)\n\n\n\n    const onChange = (e) =>{\n        const {target:{name, value}} = e\n        setPass({...pass, [name]:value})\n    }\n\n    const handleSubmit = async (e) =>{\n        e.preventDefault();\n        setLoad(true)\n        if(pass.new_password !== pass.repeat_newPass){\n            InfoAlert('Las nuevas contraseñas no coinciden')\n            setLoad(false)\n            return;\n        }\n        const newPass = {\n            new_password:pass.new_password,\n            old_password:pass.old_password\n        }\n\n        const result = await PostMethod(newPass,`api/users/profile/passwords/${ideUser}`, {Authorization:'Bearer ' + token})\n        if(result.ok){\n            SuccesAlert('La contraseña se cambio con éxito')\n            setPass(initialState)\n            setLoad(false)\n        }else{\n            //console.log(result.response)\n            setLoad(false)\n            InfoAlert('Tu contraseña actual es incorrecta')\n        }\n        //console.log(result)\n\n\n    }\n\n    return (\n        \n            <Form onSubmit={handleSubmit}>\n                <FieldInput>\n                    <Label>Vieja contraseña</Label>\n                    <Input  type=\"password\"\n                            name=\"old_password\"\n                            onChange={onChange}\n                            placeholder=\"Escribe tu contraseña actual\"\n                            />\n                </FieldInput>\n\n                <FieldInput>\n                    <Label>Nueva contraseña</Label>\n                    <Input  type=\"password\"\n                            name=\"new_password\"\n                            onChange={onChange}\n                            placeholder=\"Escribe una nueva contraseña\"\n                            />\n                </FieldInput>\n\n                <FieldInput>\n                    <Label>Repetir nueva contraseña</Label>\n                    <Input  type=\"password\"\n                            name=\"repeat_newPass\"\n                            onChange={onChange}\n                            placeholder=\"Repite la nueva contraseña\"\n                            />\n                </FieldInput>\n\n                <FieldInput>\n                    {\n                        load\n                        ?\n                            <SpinerForm/>\n                        :\n                            <ButtonSubmit margin>Cambiar contraseña</ButtonSubmit>\n                    }\n                </FieldInput>\n\n            </Form> \n        \n    );\n};\n\nexport default PerfilPassword;"]},"metadata":{},"sourceType":"module"}