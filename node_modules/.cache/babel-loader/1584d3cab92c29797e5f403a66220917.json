{"ast":null,"code":"var _jsxFileName = \"/Users/Buffalo/Desktop/menu/copia/Provisional_rep_menu/src/pages/auth/menus/items/subtitle-menu.jsx\";\nimport React from 'react';\nimport { InputLineBottom } from '../../../../components/inputs/inputs';\nimport { AddTitle, TitleForm } from '../styles/menu-styles';\nimport { ButtonAction } from '../../../../components/buttons/button-action';\nimport { connect } from 'react-redux';\nimport { PostMethod, PutMethod, DeleteMethod } from '../../../../utils/peticiones';\nimport { ErrorAlert, InfoAlert } from '../../../../utils/alertas';\nimport Modal from '../../../../components/modales/modal';\nimport { FieldInput } from '../../../../components/inputs/item-forms';\nimport { Split } from '../../../../components/containers/containers';\n\nconst SubtitleMenu = props => {\n  //console.log('SUBTITLE MENU', props)\n  const token = props.sesion.token; //const idUser = props.sesion.user.id_user\n\n  const [showinput, setShowinput] = React.useState(false);\n  const [borrar, setBorrar] = React.useState(false);\n  const {\n    name\n  } = props.data;\n\n  const handleName = e => {\n    const {\n      data,\n      setData\n    } = props;\n    setData({ ...data,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const onBlurHandle = async () => {\n    setShowinput(false);\n\n    if (name === '') {\n      InfoAlert('Agrega un nombre al menu');\n      return;\n    }\n\n    const newMenu = {\n      name: name //id_user: idUser,\n\n    };\n\n    if (props.menu === null) {\n      // PETICION SI NO ESTA CREADO EL MENU\n      const result = await PostMethod(newMenu, 'api/users/menu', {\n        Authorization: 'Bearer ' + token\n      });\n\n      if (result.ok) {\n        props.addMenu(result.response.data); //console.log(result.response)\n      } else {\n        alert('algo salio mal'); //console.log(result)\n      }\n    } else {\n      // PETICION PUT SI ESTA CREADO EL MENU\n      const idMenu = props.menu.id_menu;\n      const result = await PutMethod(newMenu, `api/users/menu/${idMenu}`, {\n        Authorization: 'Bearer ' + token\n      });\n\n      if (result.ok) {\n        props.addMenu(result.response.data.data);\n        console.log(result.response);\n      } else {\n        ErrorAlert('Algo salio mal');\n        console.log('PETICION', result);\n        console.log('estas editando el ', idMenu, ' bro');\n      }\n    }\n  };\n\n  const flagDelete = () => {\n    if (props.menu === null) {\n      InfoAlert('No has creado ningun menu');\n      return;\n    }\n\n    setBorrar(!borrar);\n  };\n\n  const handleDelete = async () => {\n    if (props.menu === null) {\n      InfoAlert('No has creado ningun menu');\n      return;\n    }\n\n    const ideMenu = props.menu.id_menu;\n    const result = await DeleteMethod(`api/users/menu/${ideMenu}`, {\n      Authorization: 'Bearer ' + token\n    });\n\n    if (result.ok) {\n      window.location.replace('/dashboard/menus');\n    }\n\n    console.log('BORRANDO: ', result);\n  }; //console.log(props.data.name)\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    toggle: borrar,\n    toggleModal: flagDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TitleForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, \"\\xBFDesas borrar este menu?\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"Al eliminar este menu, se eliminar\\xE1 toda la informaci\\xF3n que contiene.\")), /*#__PURE__*/React.createElement(FieldInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      width: '100%',\n      maxWidth: '220px',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Split, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ButtonAction, {\n    onClick: handleDelete,\n    maxWidth: \"100px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, \"Si\"), /*#__PURE__*/React.createElement(ButtonAction, {\n    onClick: flagDelete,\n    maxWidth: \"100px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  }, \"Cancelar\"))))), /*#__PURE__*/React.createElement(AddTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"input-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, showinput ? /*#__PURE__*/React.createElement(InputLineBottom, {\n    autoFocus: true,\n    name: \"name\",\n    value: name,\n    onChange: handleName,\n    onBlur: onBlurHandle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    onClick: () => setShowinput(true),\n    style: {\n      color: name ? 'var(--base)' : '#ccc'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, name ? name : 'Escribe el nombre de menu'))), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ButtonAction, {\n    onClick: flagDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-trash-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 52\n    }\n  })))));\n}; //REDUX----------------------->\n\n\nconst mapStateToProps = state => {\n  return {\n    sesion: state.login,\n    menu: state.menu\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addMenu: data => {\n      dispatch({\n        type: 'ADD_MENU',\n        data: data\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubtitleMenu); //export default SubtitleMenu;","map":{"version":3,"sources":["/Users/Buffalo/Desktop/menu/copia/Provisional_rep_menu/src/pages/auth/menus/items/subtitle-menu.jsx"],"names":["React","InputLineBottom","AddTitle","TitleForm","ButtonAction","connect","PostMethod","PutMethod","DeleteMethod","ErrorAlert","InfoAlert","Modal","FieldInput","Split","SubtitleMenu","props","token","sesion","showinput","setShowinput","useState","borrar","setBorrar","name","data","handleName","e","setData","target","value","onBlurHandle","newMenu","menu","result","Authorization","ok","addMenu","response","alert","idMenu","id_menu","console","log","flagDelete","handleDelete","ideMenu","window","location","replace","width","maxWidth","margin","color","mapStateToProps","state","login","mapDispatchToProps","dispatch","type"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,sCAAhC;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,uBAApC;AACA,SAASC,YAAT,QAA6B,8CAA7B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,YAAhC,QAAoD,8BAApD;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,2BAAtC;AACA,OAAOC,KAAP,MAAkB,sCAAlB;AACA,SAASC,UAAT,QAA2B,0CAA3B;AACA,SAASC,KAAT,QAAsB,8CAAtB;;AAKA,MAAMC,YAAY,GAAIC,KAAD,IAAW;AAE5B;AAEA,QAAMC,KAAK,GAAGD,KAAK,CAACE,MAAN,CAAaD,KAA3B,CAJ4B,CAK5B;;AACA,QAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BnB,KAAK,CAACoB,QAAN,CAAe,KAAf,CAAlC;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBtB,KAAK,CAACoB,QAAN,CAAe,KAAf,CAA5B;AACA,QAAM;AAACG,IAAAA;AAAD,MAASR,KAAK,CAACS,IAArB;;AACA,QAAMC,UAAU,GAAIC,CAAD,IAAM;AACrB,UAAM;AAACF,MAAAA,IAAD;AAAOG,MAAAA;AAAP,QAAkBZ,KAAxB;AACAY,IAAAA,OAAO,CAAC,EAAE,GAAGH,IAAL;AAAW,OAACE,CAAC,CAACE,MAAF,CAASL,IAAV,GAAgBG,CAAC,CAACE,MAAF,CAASC;AAApC,KAAD,CAAP;AACH,GAHD;;AAKA,QAAMC,YAAY,GAAG,YAAW;AAC5BX,IAAAA,YAAY,CAAC,KAAD,CAAZ;;AACA,QAAGI,IAAI,KAAK,EAAZ,EAAe;AACXb,MAAAA,SAAS,CAAC,0BAAD,CAAT;AACA;AACH;;AACD,UAAMqB,OAAO,GAAG;AACZR,MAAAA,IAAI,EAAEA,IADM,CAEZ;;AAFY,KAAhB;;AAIA,QAAGR,KAAK,CAACiB,IAAN,KAAe,IAAlB,EAAuB;AACnB;AAEA,YAAMC,MAAM,GAAI,MAAM3B,UAAU,CAACyB,OAAD,EAAU,gBAAV,EAA4B;AAACG,QAAAA,aAAa,EAAC,YAAYlB;AAA3B,OAA5B,CAAhC;;AACA,UAAGiB,MAAM,CAACE,EAAV,EAAa;AACTpB,QAAAA,KAAK,CAACqB,OAAN,CAAcH,MAAM,CAACI,QAAP,CAAgBb,IAA9B,EADS,CAET;AACH,OAHD,MAGK;AACDc,QAAAA,KAAK,CAAC,gBAAD,CAAL,CADC,CAED;AACH;AAGJ,KAbD,MAaK;AACD;AACA,YAAMC,MAAM,GAAGxB,KAAK,CAACiB,IAAN,CAAWQ,OAA1B;AACA,YAAMP,MAAM,GAAG,MAAM1B,SAAS,CAACwB,OAAD,EAAW,kBAAiBQ,MAAO,EAAnC,EAAsC;AAACL,QAAAA,aAAa,EAAC,YAAYlB;AAA3B,OAAtC,CAA9B;;AACA,UAAGiB,MAAM,CAACE,EAAV,EAAa;AACTpB,QAAAA,KAAK,CAACqB,OAAN,CAAcH,MAAM,CAACI,QAAP,CAAgBb,IAAhB,CAAqBA,IAAnC;AACAiB,QAAAA,OAAO,CAACC,GAAR,CAAYT,MAAM,CAACI,QAAnB;AACH,OAHD,MAGK;AACD5B,QAAAA,UAAU,CAAC,gBAAD,CAAV;AACAgC,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBT,MAAxB;AACAQ,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCH,MAAlC,EAA0C,MAA1C;AACH;AACJ;AACJ,GApCD;;AAsCA,QAAMI,UAAU,GAAG,MAAK;AACpB,QAAG5B,KAAK,CAACiB,IAAN,KAAe,IAAlB,EAAuB;AACnBtB,MAAAA,SAAS,CAAC,2BAAD,CAAT;AACA;AACH;;AACDY,IAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AACH,GAND;;AAQA,QAAMuB,YAAY,GAAG,YAAW;AAC5B,QAAG7B,KAAK,CAACiB,IAAN,KAAe,IAAlB,EAAuB;AACnBtB,MAAAA,SAAS,CAAC,2BAAD,CAAT;AACA;AACH;;AACD,UAAMmC,OAAO,GAAG9B,KAAK,CAACiB,IAAN,CAAWQ,OAA3B;AAEA,UAAMP,MAAM,GAAG,MAAMzB,YAAY,CAAE,kBAAiBqC,OAAQ,EAA3B,EAA8B;AAACX,MAAAA,aAAa,EAAC,YAAYlB;AAA3B,KAA9B,CAAjC;;AACA,QAAGiB,MAAM,CAACE,EAAV,EAAa;AACTW,MAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,kBAAxB;AACH;;AACDP,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA2BT,MAA3B;AACH,GAZD,CA5D4B,CA2E5B;;;AAEA,sBACI,uDAEA,oBAAC,KAAD;AAAO,IAAA,MAAM,EAAEZ,MAAf;AAAuB,IAAA,WAAW,EAAEsB,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mFAFJ,CAFJ,eAOI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAS,IAAA,KAAK,EAAE;AAACM,MAAAA,KAAK,EAAC,MAAP;AAAeC,MAAAA,QAAQ,EAAC,OAAxB;AAAiCC,MAAAA,MAAM,EAAC;AAAxC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,YAAD;AAAgB,IAAA,OAAO,EAAEP,YAAzB;AACgB,IAAA,QAAQ,EAAC,OADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,eAKI,oBAAC,YAAD;AAAgB,IAAA,OAAO,EAAED,UAAzB;AACgB,IAAA,QAAQ,EAAC,OADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,CADJ,CAFJ,CAPJ,CAFA,eA6BA,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAS,IAAA,SAAS,EAAC,aAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQzB,SAAS,gBACL,oBAAC,eAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,IAAI,EAAC,MAFT;AAGI,IAAA,KAAK,EAAEK,IAHX;AAII,IAAA,QAAQ,EAAEE,UAJd;AAKI,IAAA,MAAM,EAAEK,YALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADK,gBAST,uDAEI;AAAI,IAAA,OAAO,EAAE,MAAMX,YAAY,CAAC,IAAD,CAA/B;AACI,IAAA,KAAK,EAAE;AAACiC,MAAAA,KAAK,EAAE7B,IAAI,GAAG,aAAH,GAAmB;AAA/B,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGMA,IAAI,GAAGA,IAAH,GAAU,2BAHpB,CAFJ,CAXR,CADJ,eA0BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEoB,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAmC;AAAG,IAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAnC,CADJ,CA1BJ,CA7BA,CADJ;AAiEH,CA9ID,C,CAkJA;;;AACA,MAAMU,eAAe,GAAIC,KAAD,IAAW;AAC/B,SAAO;AACHrC,IAAAA,MAAM,EAAEqC,KAAK,CAACC,KADX;AAEHvB,IAAAA,IAAI,EAAEsB,KAAK,CAACtB;AAFT,GAAP;AAIH,CALD;;AAMA,MAAMwB,kBAAkB,GAAIC,QAAD,IAAc;AACrC,SAAO;AACHrB,IAAAA,OAAO,EAAGZ,IAAD,IAAU;AACfiC,MAAAA,QAAQ,CAAC;AACLC,QAAAA,IAAI,EAAC,UADA;AACYlC,QAAAA,IAAI,EAACA;AADjB,OAAD,CAAR;AAGH;AALE,GAAP;AAOH,CARD;;AAWA,eAAenB,OAAO,CAACgD,eAAD,EAAkBG,kBAAlB,CAAP,CAA6C1C,YAA7C,CAAf,C,CACA","sourcesContent":["import React from 'react';\nimport { InputLineBottom } from '../../../../components/inputs/inputs';\nimport { AddTitle, TitleForm } from '../styles/menu-styles';\nimport { ButtonAction } from '../../../../components/buttons/button-action';\nimport { connect } from 'react-redux'\nimport { PostMethod, PutMethod, DeleteMethod } from '../../../../utils/peticiones';\nimport { ErrorAlert, InfoAlert } from '../../../../utils/alertas';\nimport Modal from '../../../../components/modales/modal';\nimport { FieldInput } from '../../../../components/inputs/item-forms';\nimport { Split } from '../../../../components/containers/containers';\n\n\n\n\nconst SubtitleMenu = (props) => {\n\n    //console.log('SUBTITLE MENU', props)\n   \n    const token = props.sesion.token\n    //const idUser = props.sesion.user.id_user\n    const [showinput, setShowinput] = React.useState(false)\n    const [borrar, setBorrar] = React.useState(false)\n    const {name} = props.data\n    const handleName = (e) =>{\n        const {data, setData} = props\n        setData({ ...data, [e.target.name]:e.target.value })\n    }\n\n    const onBlurHandle = async () =>{\n        setShowinput(false)\n        if(name === ''){\n            InfoAlert('Agrega un nombre al menu')\n            return;\n        }\n        const newMenu = {\n            name: name,\n            //id_user: idUser,\n        }\n        if(props.menu === null){\n            // PETICION SI NO ESTA CREADO EL MENU\n\n            const result  = await PostMethod(newMenu, 'api/users/menu', {Authorization:'Bearer ' + token})\n            if(result.ok){\n                props.addMenu(result.response.data)\n                //console.log(result.response)\n            }else{\n                alert('algo salio mal')\n                //console.log(result)\n            }\n\n\n        }else{\n            // PETICION PUT SI ESTA CREADO EL MENU\n            const idMenu = props.menu.id_menu\n            const result = await PutMethod(newMenu, `api/users/menu/${idMenu}`, {Authorization:'Bearer ' + token})\n            if(result.ok){\n                props.addMenu(result.response.data.data)\n                console.log(result.response)\n            }else{\n                ErrorAlert('Algo salio mal')\n                console.log('PETICION', result)\n                console.log('estas editando el ', idMenu ,' bro')\n            }\n        }\n    }\n\n    const flagDelete = () =>{\n        if(props.menu === null){\n            InfoAlert('No has creado ningun menu');\n            return;\n        }\n        setBorrar(!borrar);\n    }\n\n    const handleDelete = async () =>{\n        if(props.menu === null){\n            InfoAlert('No has creado ningun menu');\n            return;\n        }\n        const ideMenu = props.menu.id_menu\n\n        const result = await DeleteMethod(`api/users/menu/${ideMenu}`, {Authorization:'Bearer ' + token})\n        if(result.ok){\n            window.location.replace('/dashboard/menus');\n        }\n        console.log('BORRANDO: ' , result)\n    }\n    \n\n    //console.log(props.data.name)\n\n    return (\n        <>\n\n        <Modal toggle={borrar} toggleModal={flagDelete}>\n        \n            <TitleForm>\n                <h1>¿Desas borrar este menu?</h1>\n                <p>Al eliminar este menu, se eliminará toda la información que contiene.</p>\n            </TitleForm>\n                  \n            <FieldInput>\n                        \n                <section style={{width:'100%', maxWidth:'220px', margin:'auto'}}>\n                    <Split>\n                        <ButtonAction   onClick={handleDelete}\n                                        maxWidth=\"100px\"\n                        >Si</ButtonAction>\n                        \n                        <ButtonAction   onClick={flagDelete}\n                                        maxWidth=\"100px\"\n                        >Cancelar</ButtonAction>\n                    </Split>\n                </section>\n                        \n            </FieldInput>\n        </Modal>\n\n\n\n\n        <AddTitle>\n            <section className=\"input-title\">\n                {\n                    showinput ? \n                        <InputLineBottom\n                            autoFocus\n                            name=\"name\"\n                            value={name}\n                            onChange={handleName}\n                            onBlur={onBlurHandle}\n                        />\n                    :\n                    <>\n                \n                        <p  onClick={() => setShowinput(true)}\n                            style={{color: name ? 'var(--base)' : '#ccc'}}\n                            >\n                            { name ? name : 'Escribe el nombre de menu' }\n                        </p>\n                        \n                    </>\n                }\n            </section>\n\n\n\n            <section>\n                <ButtonAction onClick={flagDelete}><i className=\"fas fa-trash-alt\"></i></ButtonAction>\n            </section>\n\n            \n        </AddTitle>\n\n        </>\n    );\n};\n\n\n\n//REDUX----------------------->\nconst mapStateToProps = (state) => {\n    return {\n        sesion: state.login,\n        menu: state.menu\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        addMenu: (data) => {\n            dispatch({\n                type:'ADD_MENU', data:data\n            })\n        }\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubtitleMenu)\n//export default SubtitleMenu;"]},"metadata":{},"sourceType":"module"}