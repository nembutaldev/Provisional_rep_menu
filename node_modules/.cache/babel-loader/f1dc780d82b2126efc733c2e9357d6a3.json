{"ast":null,"code":"var _jsxFileName = \"/Users/Buffalo/Desktop/menu/popdavise-v2/src/pages/auth/menus/items/item.jsx\";\n//import { ButtonAction } from '../../../../components/buttons/button-action';\n//import FormItem from './forms/form-item';\n//import { Input, TextArea } from '../../../../components/inputs/inputs';\nimport React from 'react';\nimport Modal from '../../../../components/modales/modal';\nimport { DeleteMethod, PostMethod } from '../../../../utils/peticiones';\nimport { connect } from 'react-redux';\nimport { ButtonIcon } from '../../../../components/buttons/button-icon';\nimport { SuccesAlert, ErrorAlert } from '../../../../utils/alertas';\nimport PutFormItem from './forms/put-form-item';\nimport { TitleForm } from '../styles/menu-styles';\nimport { FieldInput } from '../../../../components/inputs/item-forms';\nimport { Split } from '../../../../components/containers/containers';\nimport { ButtonAction } from '../../../../components/buttons/button-action';\nimport BarCharge from '../../../../components/spiners/bar-charge';\nimport ReactTooltip from 'react-tooltip';\n\nconst Item = props => {\n  //console.log('CHUEKCHUEK',props.menu.id_menu)\n  const token = props.sesion.token;\n  const {\n    name,\n    price,\n    id_product,\n    index\n  } = props.obj;\n  const [edit, setEdit] = React.useState(false);\n  const [borrar, setBorrar] = React.useState(false);\n  const [up, setUp] = React.useState(false);\n  const [down, setDown] = React.useState(false);\n  const [cargando, setCargando] = React.useState(false);\n  const [dataitem, setDataitem] = React.useState({\n    name: props.obj.name,\n    price: props.obj.price,\n    description: props.obj.description,\n    imageUrl: props.obj.url_image,\n    image: null\n  }); //console.log('IMAGENIMAGENIMAGENIMAGEN',dataitem.image)\n\n  const setModalPut = () => setEdit(!edit);\n\n  const handleChange = e => {\n    setDataitem({ ...dataitem,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async () => {\n    setCargando(true);\n    const productId = id_product;\n    const arreglo = props.objects;\n    const formData = new FormData();\n    formData.append('name', dataitem.name);\n    formData.append('price', dataitem.price);\n    formData.append('description', dataitem.description);\n    formData.append('id_section', props.obj.section_id);\n    formData.append('index', index);\n    formData.append('_method', 'PUT');\n    formData.append('image', dataitem.image);\n    const mapear = arreglo.map(item => {\n      return item.id_product;\n    });\n    const element = mapear.indexOf(productId); //props.objects.splice(element, 1, 'perrito perron')\n\n    const result = await PostMethod(formData, `api/users/product/${id_product}`, {\n      Authorization: 'Bearer ' + token\n    });\n\n    if (result.ok) {\n      console.log(result.response.data);\n      props.objects.splice(element, 1, result.response.data);\n      props.cleanObjects();\n      props.putProduct(props.objects);\n      SuccesAlert('Producto actualizado');\n      setCargando(false);\n    } else {\n      ErrorAlert('Algo salio mal');\n      console.log(result.response);\n      setCargando(false);\n    }\n  };\n\n  const modalBorrar = () => setBorrar(!borrar);\n\n  const modalBorrarCerrar = () => setBorrar(false);\n\n  const deleteProduct = async () => {\n    const productos = props.objects;\n    const items = productos.map(pr => pr.id_product);\n    const index = items.indexOf(id_product);\n    const result = await DeleteMethod(`api/users/product/${id_product}`);\n\n    if (result.ok) {\n      productos.splice(index, 1);\n      props.cleanObjects();\n      props.putProduct(productos);\n      SuccesAlert('Producto Eliminado');\n    } else {\n      ErrorAlert('Algo salio mal');\n    }\n  };\n\n  const handleFile = e => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0]; //console.log(file)\n\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        setDataitem({ ...dataitem,\n          image: file,\n          imageUrl: reader.result\n        });\n      };\n    }\n  };\n\n  const onDragOver = e => e.preventDefault();\n\n  const onDrop = e => {\n    e.preventDefault();\n    const file = e.dataTransfer.files[0];\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = function () {\n      setDataitem({ ...dataitem,\n        image: file,\n        imageUrl: reader.result\n      });\n    };\n  }; // const upItem = async () =>{\n  //     const idSection = props.obj.section_id\n  //     const arreglo = props.objects\n  //     const idSeleccionado = props.obj.id_product\n  //     const arregloLocal = arreglo.filter(arr => arr.section_id === idSection)\n  //     const mapArregloLocal = arregloLocal.map((pdt) => pdt.id_product)\n  //     const indexLocalSeleccionado = mapArregloLocal.indexOf(idSeleccionado)\n  //     // Evaluar si el index es 0\n  //     if(indexLocalSeleccionado === 0){\n  //         const length = arregloLocal.length\n  //         const lastIdElement = mapArregloLocal[length - 1]\n  //         const mapArreglo = arreglo.map((ob) => ob.id_product)\n  //         const indexSeleccionado = mapArreglo.indexOf(idSeleccionado)\n  //         const indexLastElement = mapArreglo.indexOf(lastIdElement)\n  //         //const itemSeleccionado = arreglo[indexSeleccionado]\n  //         //const itemUltimo = arreglo[indexLastElement]\n  //         const [select] = arreglo.splice(indexSeleccionado, 1)\n  //         arreglo.splice(indexLastElement, 0,  select)\n  //         console.log('%cRESULTADO', 'color:tomato', arreglo)\n  //         const result = await PostMethod(arreglo, 'api/users/product/sort', {Authorization:'Bearer ' + token})\n  //         console.log(result.response)\n  //         return;\n  //     }\n  //     const idArriba = arregloLocal[indexLocalSeleccionado-1].id_product\n  //     const mapArreglo = arreglo.map((ob) => ob.id_product)\n  //     const indexSeleccionado = mapArreglo.indexOf(idSeleccionado)\n  //     const indexArriba = mapArreglo.indexOf(idArriba)\n  //     const itemArriba = arreglo[indexArriba]\n  //     const itemSeleccionado = arreglo[indexSeleccionado]\n  //     arreglo.splice(indexSeleccionado, 1, itemArriba)\n  //     arreglo[indexArriba] = itemSeleccionado\n  //     //const selecionadoGlobalIndex = \n  //     console.log('%c->RESULTADO', 'color:red', arreglo)\n  //     console.log('%c->LOCAL', 'color:yellow', )\n  //     //const result = await PostMethod(arreglo, 'api/users/product/sort', {Authorization:'Bearer ' + token})\n  //     //console.log(result.response)\n  // }\n\n\n  const upItemLocal = async () => {\n    setUp(true);\n    const idSection = props.obj.section_id;\n    const idSeleccionado = props.obj.id_product;\n    const arreglo = props.objects;\n    const arregloLocal = arreglo.filter(arr => arr.section_id === idSection);\n    const mapArreglo = arregloLocal.map(arr => arr.id_product);\n    const indexSeleccionado = mapArreglo.indexOf(idSeleccionado);\n\n    if (indexSeleccionado === 0) {\n      const [seleccionado] = arregloLocal.splice(indexSeleccionado, 1);\n      arregloLocal.push(seleccionado);\n      const newProducts = {\n        id_menu: props.menu.id_menu,\n        products: arregloLocal\n      };\n      const result = await PostMethod(newProducts, 'api/users/product/sort', {\n        Authorization: 'Bearer ' + token\n      });\n\n      if (result.ok) {\n        props.cleanObjects();\n        props.putProduct(result.response.data);\n        setUp(false);\n      } else {\n        ErrorAlert('Algo salio mal');\n        setUp(false);\n      }\n\n      return;\n    }\n\n    const idArriba = arregloLocal[indexSeleccionado - 1].id_product;\n    const indexArriba = mapArreglo.indexOf(idArriba);\n    const itemSeleccionado = arregloLocal[indexSeleccionado];\n    const itemArriba = arregloLocal[indexArriba];\n    arregloLocal.splice(indexSeleccionado, 1, itemArriba);\n    arregloLocal[indexArriba] = itemSeleccionado;\n    const newProducts = {\n      id_menu: props.menu.id_menu,\n      products: arregloLocal\n    };\n    const result = await PostMethod(newProducts, 'api/users/product/sort', {\n      Authorization: 'Bearer ' + token\n    });\n\n    if (result.ok) {\n      props.cleanObjects();\n      props.putProduct(result.response.data);\n      setUp(false);\n    } else {\n      ErrorAlert('Algo salio mal');\n      setUp(false);\n    }\n  };\n\n  const downItemLocal = async () => {\n    setDown(true);\n    const idSection = props.obj.section_id;\n    const idSeleccionado = props.obj.id_product;\n    const arreglo = props.objects;\n    const arregloLocal = arreglo.filter(arr => arr.section_id === idSection);\n    const mapArreglo = arregloLocal.map(arr => arr.id_product);\n    const indexSeleccionado = mapArreglo.indexOf(idSeleccionado);\n\n    if (indexSeleccionado === arregloLocal.length - 1) {\n      const [selected] = arregloLocal.splice(indexSeleccionado);\n      arregloLocal.unshift(selected); //console.log('ultimo elemento selecionado', indexSeleccionado, 'RESULTADO',arregloLocal);\n\n      const newProducts = {\n        id_menu: props.menu.id_menu,\n        products: arregloLocal\n      };\n      const result = await PostMethod(newProducts, 'api/users/product/sort', {\n        Authorization: 'Bearer ' + token\n      });\n\n      if (result.ok) {\n        props.cleanObjects();\n        props.putProduct(result.response.data);\n        setDown(false);\n      } else {\n        ErrorAlert('Algo salio mal');\n        setDown(false);\n      }\n\n      return;\n    }\n\n    const idAbajo = arregloLocal[indexSeleccionado + 1].id_product;\n    const indexAbajo = mapArreglo.indexOf(idAbajo); //const itemSeleccionado = arregloLocal[indexSeleccionado]\n\n    const itemAbajo = arregloLocal[indexAbajo];\n    const [selected] = arregloLocal.splice(indexSeleccionado, 1, itemAbajo);\n    arregloLocal.splice(indexAbajo, 1, selected); //console.log('SELECCIONADO', itemSeleccionado, 'ABAJO', itemAbajo, 'ARREGLO', arregloLocal);\n\n    const newProducts = {\n      id_menu: props.menu.id_menu,\n      products: arregloLocal\n    };\n    const result = await PostMethod(newProducts, 'api/users/product/sort', {\n      Authorization: 'Bearer ' + token\n    });\n\n    if (result.ok) {\n      props.cleanObjects();\n      props.putProduct(result.response.data);\n      setDown(false);\n    } else {\n      ErrorAlert('Algo salio mal');\n      setDown(false);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    toggle: edit,\n    toggleModal: setModalPut,\n    cerrarFunction: () => setEdit(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PutFormItem, {\n    handleChange: handleChange,\n    dataitem: dataitem,\n    handleSubmit: handleSubmit,\n    handleFile: handleFile,\n    onDragOver: onDragOver,\n    onDrop: onDrop,\n    cargando: cargando,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Modal, {\n    toggle: borrar,\n    toggleModal: modalBorrar,\n    cerrarFunction: modalBorrarCerrar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TitleForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }\n  }, \"\\xBFDesas borrar este producto?\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 17\n    }\n  }, \"Al eliminar este producto, se eliminar\\xE1 toda la informaci\\xF3n que contiene.\")), /*#__PURE__*/React.createElement(FieldInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    style: {\n      width: '100%',\n      maxWidth: '220px',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Split, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ButtonAction, {\n    onClick: deleteProduct,\n    maxWidth: \"100px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 25\n    }\n  }, \"Si\"), /*#__PURE__*/React.createElement(ButtonAction, {\n    onClick: modalBorrar,\n    maxWidth: \"100px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 25\n    }\n  }, \"Cancelar\"))))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"txt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-tip\": true,\n    \"data-for\": `productName_${id_product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 21\n    }\n  }, name), /*#__PURE__*/React.createElement(ReactTooltip, {\n    id: `productName_${id_product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 21\n    }\n  }, name)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 18\n    }\n  }, \"$\", price)), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(ButtonIcon, {\n    onClick: setModalPut,\n    fontSize: \"1rem\",\n    backColor: \"var(--colorcinco)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(ButtonIcon, {\n    onClick: modalBorrar,\n    fontSize: \"1rem\",\n    backColor: \"var(--colorcinco)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-trash-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 22\n    }\n  })), up ? /*#__PURE__*/React.createElement(BarCharge, {\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(ButtonIcon, {\n    fontSize: \"1rem\",\n    backColor: \"var(--colorcinco)\",\n    onClick: upItemLocal,\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-chevron-circle-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 42\n    }\n  })), down ? /*#__PURE__*/React.createElement(BarCharge, {\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(ButtonIcon, {\n    fontSize: \"1rem\",\n    backColor: \"var(--colorcinco)\",\n    onClick: downItemLocal,\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-chevron-circle-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 42\n    }\n  })))));\n}; //REDUX------------->\n\n\nconst mapStateToProps = state => {\n  return {\n    sesion: state.login,\n    objects: state.menuObject,\n    menu: state.menu\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    cleanObjects: () => {\n      dispatch({\n        type: 'CLEAN_OBJECT'\n      });\n    },\n    putProduct: data => {\n      dispatch({\n        type: 'EDITAR_OBJECT',\n        data: data\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Item);","map":{"version":3,"sources":["/Users/Buffalo/Desktop/menu/popdavise-v2/src/pages/auth/menus/items/item.jsx"],"names":["React","Modal","DeleteMethod","PostMethod","connect","ButtonIcon","SuccesAlert","ErrorAlert","PutFormItem","TitleForm","FieldInput","Split","ButtonAction","BarCharge","ReactTooltip","Item","props","token","sesion","name","price","id_product","index","obj","edit","setEdit","useState","borrar","setBorrar","up","setUp","down","setDown","cargando","setCargando","dataitem","setDataitem","description","imageUrl","url_image","image","setModalPut","handleChange","e","target","value","handleSubmit","productId","arreglo","objects","formData","FormData","append","section_id","mapear","map","item","element","indexOf","result","Authorization","ok","console","log","response","data","splice","cleanObjects","putProduct","modalBorrar","modalBorrarCerrar","deleteProduct","productos","items","pr","handleFile","files","file","reader","FileReader","readAsDataURL","onload","onDragOver","preventDefault","onDrop","dataTransfer","upItemLocal","idSection","idSeleccionado","arregloLocal","filter","arr","mapArreglo","indexSeleccionado","seleccionado","push","newProducts","id_menu","menu","products","idArriba","indexArriba","itemSeleccionado","itemArriba","downItemLocal","length","selected","unshift","idAbajo","indexAbajo","itemAbajo","width","maxWidth","margin","mapStateToProps","state","login","menuObject","mapDispatchToProps","dispatch","type"],"mappings":"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","sourcesContent":["//import { ButtonAction } from '../../../../components/buttons/button-action';\n//import FormItem from './forms/form-item';\n//import { Input, TextArea } from '../../../../components/inputs/inputs';\nimport React from 'react';\nimport Modal from '../../../../components/modales/modal';\nimport { DeleteMethod, PostMethod } from '../../../../utils/peticiones';\nimport {connect} from 'react-redux'\nimport { ButtonIcon } from '../../../../components/buttons/button-icon';\nimport { SuccesAlert, ErrorAlert } from '../../../../utils/alertas';\nimport PutFormItem from './forms/put-form-item';\nimport { TitleForm } from '../styles/menu-styles';\nimport { FieldInput } from '../../../../components/inputs/item-forms';\nimport { Split } from '../../../../components/containers/containers';\nimport { ButtonAction } from '../../../../components/buttons/button-action';\nimport BarCharge from '../../../../components/spiners/bar-charge';\nimport ReactTooltip from 'react-tooltip'\n\n\nconst Item = (props) => {\n\n    //console.log('CHUEKCHUEK',props.menu.id_menu)\n    const token = props.sesion.token\n    const {name, price, id_product, index} = props.obj\n    const[edit, setEdit]= React.useState(false)\n    const[borrar, setBorrar] = React.useState(false)\n    const [up, setUp] = React.useState(false)\n    const [down, setDown] = React.useState(false)\n    const [cargando, setCargando] = React.useState(false)\n\n    const [dataitem, setDataitem] = React.useState({\n        name:props.obj.name,\n        price:props.obj.price,\n        description: props.obj.description,\n        imageUrl:props.obj.url_image,\n        image:null\n    })\n    //console.log('IMAGENIMAGENIMAGENIMAGEN',dataitem.image)\n\n    const setModalPut = () => setEdit(!edit)\n\n    const handleChange = (e) =>{\n        setDataitem({\n            ...dataitem,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    const handleSubmit = async () =>{\n        setCargando(true)\n        const productId = id_product\n        const arreglo = props.objects\n\n\n        const formData = new FormData();\n        formData.append('name', dataitem.name)\n        formData.append('price', dataitem.price)\n        formData.append('description', dataitem.description)\n        formData.append('id_section', props.obj.section_id)\n        formData.append('index', index)\n        formData.append('_method', 'PUT')\n        formData.append('image', dataitem.image)\n\n        const mapear = arreglo.map((item) =>{\n            return item.id_product\n        })\n\n        const element = mapear.indexOf(productId)\n        //props.objects.splice(element, 1, 'perrito perron')\n        const result = await PostMethod(formData, `api/users/product/${id_product}`, {Authorization:'Bearer ' + token})\n        if(result.ok){\n            console.log(result.response.data)\n            props.objects.splice(element, 1, result.response.data)\n            props.cleanObjects()\n            props.putProduct(props.objects)\n            SuccesAlert('Producto actualizado') \n            setCargando(false)           \n        }else{\n            ErrorAlert('Algo salio mal')\n            console.log(result.response)\n            setCargando(false) \n        }\n        \n    }\n\n    const modalBorrar = () => setBorrar(!borrar);\n    const modalBorrarCerrar = () => setBorrar(false);\n\n    const deleteProduct = async () =>{\n        const productos = props.objects\n        const items = productos.map((pr) => pr.id_product)\n        const index = items.indexOf(id_product)\n\n        const result = await DeleteMethod(`api/users/product/${id_product}`)\n        if(result.ok){\n            productos.splice(index, 1);\n            props.cleanObjects()\n            props.putProduct(productos)\n            SuccesAlert('Producto Eliminado');\n        }else{\n            ErrorAlert('Algo salio mal')\n        }\n    }\n\n    const handleFile = (e) =>{\n        if(e.target.files && e.target.files[0]){\n            const file = e.target.files[0]\n            //console.log(file)\n\n            const reader = new FileReader();\n            reader.readAsDataURL(file)\n            reader.onload = function(){\n                setDataitem({ ...dataitem, image:file, imageUrl:reader.result })\n            }\n\n        }\n    }\n    const onDragOver = (e) => e.preventDefault();\n\n    const onDrop = (e) =>{\n        e.preventDefault();\n        const file = e.dataTransfer.files[0]\n        \n\n        const reader = new FileReader();\n        reader.readAsDataURL(file)\n        reader.onload = function(){\n            setDataitem({ ...dataitem, image:file, imageUrl:reader.result })\n        }\n    }\n\n\n    // const upItem = async () =>{\n    //     const idSection = props.obj.section_id\n    //     const arreglo = props.objects\n    //     const idSeleccionado = props.obj.id_product\n    //     const arregloLocal = arreglo.filter(arr => arr.section_id === idSection)\n    //     const mapArregloLocal = arregloLocal.map((pdt) => pdt.id_product)\n    //     const indexLocalSeleccionado = mapArregloLocal.indexOf(idSeleccionado)\n\n    //     // Evaluar si el index es 0\n    //     if(indexLocalSeleccionado === 0){\n    //         const length = arregloLocal.length\n    //         const lastIdElement = mapArregloLocal[length - 1]\n    //         const mapArreglo = arreglo.map((ob) => ob.id_product)\n    //         const indexSeleccionado = mapArreglo.indexOf(idSeleccionado)\n    //         const indexLastElement = mapArreglo.indexOf(lastIdElement)\n\n    //         //const itemSeleccionado = arreglo[indexSeleccionado]\n    //         //const itemUltimo = arreglo[indexLastElement]\n    //         const [select] = arreglo.splice(indexSeleccionado, 1)\n    //         arreglo.splice(indexLastElement, 0,  select)\n\n    //         console.log('%cRESULTADO', 'color:tomato', arreglo)\n    //         const result = await PostMethod(arreglo, 'api/users/product/sort', {Authorization:'Bearer ' + token})\n    //         console.log(result.response)\n    //         return;\n    //     }\n\n\n\n\n    //     const idArriba = arregloLocal[indexLocalSeleccionado-1].id_product\n    //     const mapArreglo = arreglo.map((ob) => ob.id_product)\n        \n        \n    //     const indexSeleccionado = mapArreglo.indexOf(idSeleccionado)\n    //     const indexArriba = mapArreglo.indexOf(idArriba)\n\n    //     const itemArriba = arreglo[indexArriba]\n    //     const itemSeleccionado = arreglo[indexSeleccionado]\n    //     arreglo.splice(indexSeleccionado, 1, itemArriba)\n    //     arreglo[indexArriba] = itemSeleccionado\n    //     //const selecionadoGlobalIndex = \n    //     console.log('%c->RESULTADO', 'color:red', arreglo)\n    //     console.log('%c->LOCAL', 'color:yellow', )\n    //     //const result = await PostMethod(arreglo, 'api/users/product/sort', {Authorization:'Bearer ' + token})\n    //     //console.log(result.response)\n        \n    // }\n\n\n\n    const upItemLocal = async () =>{\n        setUp(true)\n        const idSection = props.obj.section_id\n        const idSeleccionado = props.obj.id_product\n        const arreglo = props.objects\n        const arregloLocal = arreglo.filter(arr => arr.section_id === idSection)\n        const mapArreglo = arregloLocal.map((arr) => arr.id_product)\n\n        const indexSeleccionado = mapArreglo.indexOf(idSeleccionado)\n\n        if(indexSeleccionado === 0){\n\n            const [seleccionado] = arregloLocal.splice(indexSeleccionado, 1)\n            arregloLocal.push(seleccionado)\n            \n            const newProducts = {\n                id_menu:props.menu.id_menu,\n                products: arregloLocal\n            }\n\n            const result = await PostMethod(newProducts, 'api/users/product/sort', {Authorization:'Bearer ' + token})\n            if(result.ok){\n                props.cleanObjects()\n                props.putProduct(result.response.data)\n                setUp(false)\n            }else{\n                ErrorAlert('Algo salio mal')\n                setUp(false)\n            }\n\n            return;\n        }\n\n\n        const idArriba = arregloLocal[indexSeleccionado - 1].id_product\n        const indexArriba = mapArreglo.indexOf(idArriba)\n\n\n        const itemSeleccionado = arregloLocal[indexSeleccionado]\n        const itemArriba = arregloLocal[indexArriba]\n\n        arregloLocal.splice(indexSeleccionado, 1, itemArriba)\n        arregloLocal[indexArriba] = itemSeleccionado\n\n        const newProducts = {\n            id_menu:props.menu.id_menu,\n            products: arregloLocal\n        }\n        \n        const result = await PostMethod(newProducts, 'api/users/product/sort', {Authorization:'Bearer ' + token})\n        \n        if(result.ok){\n            props.cleanObjects()\n            props.putProduct(result.response.data)\n            setUp(false)\n        }else{\n            ErrorAlert('Algo salio mal')\n            setUp(false)\n        }\n\n    }\n\n\n\n    const downItemLocal = async () =>{\n        setDown(true)\n        const idSection = props.obj.section_id\n        const idSeleccionado = props.obj.id_product\n        const arreglo = props.objects\n        const arregloLocal = arreglo.filter(arr => arr.section_id === idSection)\n        const mapArreglo = arregloLocal.map((arr) => arr.id_product)\n\n        const indexSeleccionado = mapArreglo.indexOf(idSeleccionado)\n        \n        if(indexSeleccionado === arregloLocal.length -1){\n            const [selected] = arregloLocal.splice(indexSeleccionado);\n            arregloLocal.unshift(selected)\n            //console.log('ultimo elemento selecionado', indexSeleccionado, 'RESULTADO',arregloLocal);\n            const newProducts = {\n                id_menu:props.menu.id_menu,\n                products: arregloLocal\n            }\n\n            const result = await PostMethod(newProducts, 'api/users/product/sort', {Authorization:'Bearer ' + token})\n            if(result.ok){\n                props.cleanObjects()\n                props.putProduct(result.response.data)\n                setDown(false)\n            }else{\n                ErrorAlert('Algo salio mal')\n                setDown(false)\n            }\n            return;\n        }\n\n        const idAbajo = arregloLocal[indexSeleccionado + 1].id_product\n        const indexAbajo = mapArreglo.indexOf(idAbajo)\n\n        //const itemSeleccionado = arregloLocal[indexSeleccionado]\n        const itemAbajo = arregloLocal[indexAbajo]\n\n        const [selected] = arregloLocal.splice(indexSeleccionado, 1, itemAbajo)\n        arregloLocal.splice(indexAbajo, 1, selected)\n\n        //console.log('SELECCIONADO', itemSeleccionado, 'ABAJO', itemAbajo, 'ARREGLO', arregloLocal);\n        const newProducts = {\n            id_menu:props.menu.id_menu,\n            products: arregloLocal\n        }\n        const result = await PostMethod(newProducts, 'api/users/product/sort', {Authorization:'Bearer ' + token})\n        if(result.ok){\n            props.cleanObjects()\n            props.putProduct(result.response.data)\n            setDown(false)\n        }else{\n            ErrorAlert('Algo salio mal')\n            setDown(false)\n        }\n    }\n\n    return (\n        <>\n\n        <Modal toggle={edit} toggleModal={setModalPut} cerrarFunction={()=> setEdit(false)}>\n            <PutFormItem    handleChange={handleChange}\n                            dataitem={dataitem}\n                            handleSubmit={handleSubmit}\n                            handleFile={handleFile}\n                            onDragOver={onDragOver}\n                            onDrop={onDrop}\n                            cargando={cargando}\n                            />\n        </Modal>\n\n\n        <Modal toggle={borrar} toggleModal={modalBorrar} cerrarFunction={modalBorrarCerrar}>\n        \n            <TitleForm>\n                <h1>¿Desas borrar este producto?</h1>\n                <p>Al eliminar este producto, se eliminará toda la información que contiene.</p>\n            </TitleForm>\n                  \n            <FieldInput>\n                        \n                <section style={{width:'100%', maxWidth:'220px', margin:'auto'}}>\n                    <Split>\n                        <ButtonAction   onClick={deleteProduct}\n                                        maxWidth=\"100px\"\n                        >Si</ButtonAction>\n                        \n                        <ButtonAction   onClick={modalBorrar}\n                                        maxWidth=\"100px\"\n                        >Cancelar</ButtonAction>\n                    </Split>\n                </section>\n                        \n            </FieldInput>\n        </Modal>\n\n\n\n\n        {/* ITEM--------ITEM----------ITEM-------> */}\n        \n         <section className=\"item\">\n             <section className=\"txt\">\n                 <div data-tip data-for={`productName_${id_product}`}>\n                    <p>{name}</p>\n                    <ReactTooltip id={`productName_${id_product}`}>{name}</ReactTooltip>\n                 </div>\n                 <div>\n                     ${price}\n                 </div>\n             </section>\n\n\n             <section className=\"buttons\">\n\n                    \n                   \n                    <ButtonIcon onClick={setModalPut}\n                                fontSize=\"1rem\"\n                                backColor='var(--colorcinco)'\n                    ><i className=\"fas fa-edit\"></i></ButtonIcon>\n\n\n                    <ButtonIcon onClick={modalBorrar}\n                                fontSize=\"1rem\"\n                                backColor='var(--colorcinco)'\n                    ><i className=\"fas fa-trash-alt\"></i></ButtonIcon>\n\n                     {/* //<button onClick={upItem}>Arriba</button> */}\n                    {up ? \n                        <BarCharge color=\"white\"/>\n                        :\n                    \n                        <ButtonIcon  \n                                        fontSize=\"1rem\"\n                                        backColor='var(--colorcinco)'\n                                        onClick={upItemLocal}\n                                        color='white'\n                                        ><i className=\"fas fa-chevron-circle-up\"></i></ButtonIcon>\n                    }\n                    {down ?\n                        <BarCharge color=\"white\"/>\n                        :\n    \n                        <ButtonIcon  \n                                        fontSize=\"1rem\"\n                                        backColor='var(--colorcinco)'\n                                        onClick={downItemLocal}\n                                        color='white'\n                                        ><i className=\"fas fa-chevron-circle-down\"></i></ButtonIcon>\n                    }\n\n                    \n                    \n                 \n             </section>\n         </section>\n\n\n\n        </>\n    );\n};\n//REDUX------------->\n\nconst mapStateToProps = (state) => {\n    return {\n        sesion: state.login,\n        objects: state.menuObject,\n        menu:state.menu\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        cleanObjects: () => {\n            dispatch({type:'CLEAN_OBJECT'})\n        },\n        putProduct:(data)=>{\n            dispatch({type:'EDITAR_OBJECT', data:data})\n        },\n        \n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Item)\n"]},"metadata":{},"sourceType":"module"}